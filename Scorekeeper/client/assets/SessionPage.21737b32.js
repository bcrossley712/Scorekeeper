import{k as A,u as F,g as E,j as C,D as H,c as f,a as c,o as l,b as m,d as t,l as G,t as j,F as g,B,e as o,s as r,z as y}from"./vendor.bbfce40b.js";import{_ as I,A as s,p as u,h as D,g as N,l as S,P as n}from"./index.02b4afa1.js";import{s as h}from"./SessionsService.ce824493.js";const V={setup(){const v=A(),a=F(),d=E({});return C(()=>{d.value=s.activeSession}),H(async()=>{try{s.activeSession=await h.getSessionById(v.params.id),await u.getSessionsPlayers(v.params.id),await D.getSessionsHands(v.params.id),await N.getGames()}catch(e){S.error(e),n.toast(e.message,"error")}s.activeGame=s.games.find(e=>e.id==s.activeSession.gameId)}),{players:f(()=>s.players),game:f(()=>s.activeGame),session:f(()=>s.activeSession),async addPlayer(){try{u.addPlayer(v.params.id)}catch(e){S.error(e),n.toast(e.message,"error")}},async archiveSession(){var e;try{((e=s.activeSession)==null?void 0:e.archived)==!1?await n.confirm("Archive Session and declare winner?","","info","Go for it!")&&(d.value.winner="I win!",d.value.archived=!s.activeSession.archived,h.archiveSession(d.value),a.push({name:"Game",params:{id:s.activeSession.gameId}})):await n.confirm("Remove from archive and allow editing?","","info","Yes, please.")&&(d.value.archived=!s.activeSession.archived,h.archiveSession(d.value))}catch(p){S.error(p),n.toast(p.message,"error")}},async deleteSession(){try{await n.confirm("Delete Session?")&&(a.push({name:"Game",params:{id:s.activeSession.gameId}}),await h.deleteSession(s.activeSession.id),n.toast("Session deleted","success"))}catch(e){S.error(e),n.toast(e.message,"error")}}}}},M={class:"session container-fluid"},R={class:"row"},z={class:"col-12 d-flex justify-content-between p-2"},L={key:0,class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#player-add"},T=t("div",{class:"v-else"},null,-1),Y={class:"text-center"},q={key:1},J={class:"row"},K=y("Add Player"),O=y("Edit Player?"),Q=y("Add Hand"),U=y("Edit Hand?");function W(v,a,d,e,p,X){const b=c("Player"),w=c("PlayerAddForm"),_=c("Modal"),P=c("PlayerEditForm"),k=c("HandAddForm"),x=c("HandEditForm");return l(),m(g,null,[t("div",M,[t("div",R,[t("div",z,[e.session.archived==!1?(l(),m("button",L," Add Player ")):G("",!0),T,t("div",Y,[t("h2",null,j(e.game.title),1)]),e.session.archived==!1?(l(),m("div",q,[t("button",{class:"btn btn-warning",onClick:a[0]||(a[0]=(...i)=>e.archiveSession&&e.archiveSession(...i))}," Complete session? "),t("i",{class:"mdi mdi-delete text-danger selectable ms-2",title:"Delete session",onClick:a[1]||(a[1]=(...i)=>e.deleteSession&&e.deleteSession(...i))})])):(l(),m("i",{key:2,class:"mdi mdi-pencil text-warning selectable",title:"Edit Session",onClick:a[2]||(a[2]=(...i)=>e.archiveSession&&e.archiveSession(...i))}))])]),t("div",J,[(l(!0),m(g,null,B(e.players,i=>(l(),m("div",{class:"col-6 col-sm-4 col-md-2",key:i.id},[o(b,{player:i},null,8,["player"])]))),128))])]),o(_,{id:"player-add"},{title:r(()=>[K]),body:r(()=>[o(w)]),_:1}),o(_,{id:"player-edit"},{title:r(()=>[O]),body:r(()=>[o(P)]),_:1}),o(_,{id:"add-hand"},{title:r(()=>[Q]),body:r(()=>[o(k)]),_:1}),o(_,{id:"edit-hand"},{title:r(()=>[U]),body:r(()=>[o(x)]),_:1})],64)}var se=I(V,[["render",W]]);export{se as default};
