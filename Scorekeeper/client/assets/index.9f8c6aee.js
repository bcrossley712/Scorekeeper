import{r as ee,c as g,a as x,o as i,b as d,d as a,e as k,w as P,F as B,f as H,S as j,g as te,h as w,i as T,M as S,j as m,v as _,k as C,l as G,u as ae,t as p,m as V,n as $,p as oe,q as se,s as ne,x as re,y as D,z as L,A as M,B as le,C as ie}from"./vendor.3fd9f7a9.js";const de=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}};de();const l=ee({user:{},account:{},games:[],activeGame:{},sessions:[],activeSession:{},players:[],activePlayer:{},hands:[],activeHand:{}});var f=(s,e)=>{for(const[o,t]of e)s[o]=t;return s};const ce={name:"App",setup(){return{appState:g(()=>l)}}},ue=H("Edit Account?");function me(s,e,o,t,r,c){const n=x("Navbar"),y=x("router-view"),O=x("AccountEditForm"),X=x("Modal");return i(),d(B,null,[a("header",null,[k(n)]),a("main",null,[k(y)]),k(X,{id:"edit-account"},{title:P(()=>[ue]),body:P(()=>[k(O)]),_:1})],64)}var _e=f(ce,[["render",me]]);class b{static async confirm(e="Are you sure?",o="You won't be able to revert this!",t="warning",r="Yes, delete it!"){try{return!!(await j.fire({title:e,text:o,icon:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",o="warning",t="top-end",r=3e3,c=!0){j.fire({title:e,icon:o,position:t,timer:r,timerProgressBar:c,toast:!0,showConfirmButton:!1})}}const q=window.location.origin.includes("localhost"),F=q?"http://localhost:3000":"",be="dev-bcrossley712.us.auth0.com",he="omph0kyWMR2mKaoZphUvm7lVBfiDkRPf",ge="https://brian-dev.com";function A(s,e){if(q)console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(s){case"log":case"assert":return}console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const u={log(){A("log",arguments)},error(){A("error",arguments)},warn(){A("warn",arguments)},assert(){A("assert",arguments)},trace(){A("trace",arguments)}},h=te.create({baseURL:F,timeout:8e3});class pe{async getAccount(){try{const e=await h.get("/account");l.account=e.data}catch(e){u.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async editAccount(e){const o=await h.put("/account",e);u.log("[editAccount]",o.data),l.account=o.data}}const z=new pe,fe={setup(){const s=w({});return T(()=>{s.value=l.account}),{editable:s,async handleSubmit(){try{await z.editAccount(s.value),S.getOrCreateInstance(document.getElementById("edit-account")).hide(),b.toast("Account updated!","success")}catch(e){u.error(e),b.toast(e.message,"error")}}}}},ve={class:"container-fluid"},ye={class:"row"},Se={class:"mb-3 col-12"},ke=a("label",{for:"name",class:"form-label"},"Name",-1),we={class:"mb-3 col-12"},$e=a("label",{for:"picture",class:"form-label"},"Picture",-1),xe={class:"d-flex justify-content-end"};function Ae(s,e,o,t,r,c){return i(),d("div",ve,[a("div",ye,[a("div",Se,[ke,m(a("input",{type:"text",class:"form-control",name:"name",id:"name","aria-describedby":"helpId",placeholder:"Name...","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.name=n),required:""},null,512),[[_,t.editable.name]])]),a("div",we,[$e,m(a("input",{type:"text",class:"form-control",name:"picture",id:"picture","aria-describedby":"helpId",placeholder:"Picture...","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.picture=n),required:""},null,512),[[_,t.editable.picture]])]),a("div",xe,[a("button",{class:"btn btn-success",onClick:e[2]||(e[2]=(...n)=>t.handleSubmit&&t.handleSubmit(...n))},"Confirm")])])])}var Ee=f(fe,[["render",Ae]]),Ie=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ee});class Pe{async getGames(){const e=await h.get("api/games");u.log("[getGames]",e.data),l.games=e.data}async getGameById(e){const o=await h.get(`api/games/${e}`);return u.log("[getGameById]",o.data),l.activeGame=o.data,o.data}async addGame(e){const o=await h.post("api/games",e);u.log("[addGame]",o.data),l.games=[...l.games,o.data]}async editGame(e){let o=l.games.findIndex(r=>r.id==e.id);const t=await h.put(`api/games/${e.id}`,e);u.log("[editGame]",t.data),l.games.splice(o,1,t.data)}async deleteGame(e){let o=l.games.findIndex(r=>r.id==e);const t=await h.delete(`api/games/${e}`);u.log("[deleteGame]",t.data),l.games.splice(o,1)}}const U=new Pe,Te={setup(){const s=w({});return{editable:s,async handleSubmit(){try{await U.addGame(s.value),S.getOrCreateInstance(document.getElementById("add-game")).hide(),s.value={}}catch(e){u.error(e),b.toast(e.message,"error")}}}}},Ce={class:"container-fluid"},Oe={class:"col-12"},He={class:"mb-3"},Ge=a("label",{for:"title",class:"form-label"},"Game Title",-1),Ve={class:"col-12"},Ue={class:"mb-3"},Ne=a("label",{for:"Image",class:"form-label"},"Url Image",-1),Re={class:"col-12"},Be={class:"mb-3"},je=a("label",{for:"Scoring",class:"form-label"},"Scoring",-1),De={class:"col-12"},Le={class:"mb-3"},Me=a("label",{for:"Rules",class:"form-label"},"How to play",-1),qe={class:"col-6"},Fe={class:"form-check"},ze=a("label",{class:"form-check-label",for:"bidding"}," Bidding game? ",-1),We={class:"col-6"},Ke={class:"form-check"},Ye=a("label",{class:"form-check-label",for:"lowScoreWins"}," Low Score Wins? ",-1),Qe=a("div",{class:"p-2"},[a("button",{class:"btn btn-success"},"Submit")],-1);function Ze(s,e,o,t,r,c){return i(),d("div",Ce,[a("form",{class:"row",onSubmit:e[6]||(e[6]=G((...n)=>t.handleSubmit&&t.handleSubmit(...n),["prevent"]))},[a("div",Oe,[a("div",He,[Ge,m(a("input",{type:"text",class:"form-control",name:"title",id:"title","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.title=n),placeholder:"Title...",required:""},null,512),[[_,t.editable.title]])])]),a("div",Ve,[a("div",Ue,[Ne,m(a("input",{type:"text",class:"form-control",name:"Image",id:"Image","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.image=n),placeholder:"https://thiscatdoesnotexist.com..."},null,512),[[_,t.editable.image]])])]),a("div",Re,[a("div",Be,[je,m(a("input",{type:"text",class:"form-control",name:"Scoring",id:"Scoring","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.scoring=n),placeholder:"Each hand taken is worth 10..."},null,512),[[_,t.editable.scoring]])])]),a("div",De,[a("div",Le,[Me,m(a("input",{type:"text",class:"form-control",name:"Rules",id:"Rules","onUpdate:modelValue":e[3]||(e[3]=n=>t.editable.rules=n),placeholder:"Dealer deals 5 cards..."},null,512),[[_,t.editable.rules]])])]),a("div",qe,[a("div",Fe,[m(a("input",{class:"form-check-input",type:"checkbox",value:"false",id:"bidding","onUpdate:modelValue":e[4]||(e[4]=n=>t.editable.bidding=n)},null,512),[[C,t.editable.bidding]]),ze])]),a("div",We,[a("div",Ke,[m(a("input",{class:"form-check-input",type:"checkbox",value:"false",id:"lowScoreWins","onUpdate:modelValue":e[5]||(e[5]=n=>t.editable.lowScoreWins=n)},null,512),[[C,t.editable.lowScoreWins]]),Ye])]),Qe],32)])}var Je=f(Te,[["render",Ze]]),Xe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Je});const et={setup(){const s=w({}),e=ae();return T(()=>s.value=l.activeGame),{editable:s,async handleSubmit(){try{await U.editGame(s.value),S.getOrCreateInstance(document.getElementById("edit-game")).hide(),s.value={}}catch(o){u.error(o),b.toast("Are you logged in?","error","center")}},async deleteGame(){try{await b.confirm("Are you sure?","All game data and history will be lost forever!","info","Yes, Delete!")&&await b.confirm("Okay but are you really really sure??","","info","I said yes!")&&(S.getOrCreateInstance(document.getElementById("edit-game")).hide(),await U.deleteGame(l.activeGame.id),e.push({name:"Home"}),b.toast("Game deleted","success"))}catch(o){u.error(o),b.toast(o.message,"error")}}}}},tt={class:"container-fluid"},at={class:"row"},ot={class:"col-12"},st={class:"mb-3"},nt=a("label",{for:"title",class:"form-label"},"Game Title",-1),rt={class:"col-12"},lt={class:"mb-3"},it=a("label",{for:"Image",class:"form-label"},"Url Image",-1),dt={class:"col-12"},ct={class:"mb-3"},ut=a("label",{for:"Scoring",class:"form-label"},"Scoring",-1),mt={class:"col-12"},_t={class:"mb-3"},bt=a("label",{for:"Rules",class:"form-label"},"How to play",-1),ht={class:"col-6"},gt={class:"form-check"},pt=a("label",{class:"form-check-label",for:"bidding"}," Bidding game? ",-1),ft={class:"col-6"},vt={class:"form-check"},yt=a("label",{class:"form-check-label",for:"lowScoreWins"}," Low Score Wins? ",-1),St={class:"d-flex justify-content-between p-2"};function kt(s,e,o,t,r,c){return i(),d("div",tt,[a("div",at,[a("div",ot,[a("div",st,[nt,m(a("input",{type:"text",class:"form-control",name:"title",id:"title","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.title=n),placeholder:"Title...",required:""},null,512),[[_,t.editable.title]])])]),a("div",rt,[a("div",lt,[it,m(a("input",{type:"text",class:"form-control",name:"Image",id:"Image","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.image=n),placeholder:"https://thiscatdoesnotexist.com..."},null,512),[[_,t.editable.image]])])]),a("div",dt,[a("div",ct,[ut,m(a("input",{type:"text",class:"form-control",name:"Scoring",id:"Scoring","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.scoring=n),placeholder:"Each hand taken is worth 10..."},null,512),[[_,t.editable.scoring]])])]),a("div",mt,[a("div",_t,[bt,m(a("input",{type:"text",class:"form-control",name:"Rules",id:"Rules","onUpdate:modelValue":e[3]||(e[3]=n=>t.editable.rules=n),placeholder:"Dealer deals 5 cards..."},null,512),[[_,t.editable.rules]])])]),a("div",ht,[a("div",gt,[m(a("input",{class:"form-check-input",type:"checkbox",value:"false",id:"bidding","onUpdate:modelValue":e[4]||(e[4]=n=>t.editable.bidding=n)},null,512),[[C,t.editable.bidding]]),pt])]),a("div",ft,[a("div",vt,[m(a("input",{class:"form-check-input",type:"checkbox",value:"false",id:"lowScoreWins","onUpdate:modelValue":e[5]||(e[5]=n=>t.editable.lowScoreWins=n)},null,512),[[C,t.editable.lowScoreWins]]),yt])]),a("div",St,[a("button",{class:"btn btn-success",onClick:e[6]||(e[6]=(...n)=>t.handleSubmit&&t.handleSubmit(...n))},"Submit"),a("button",{class:"btn btn-danger",onClick:e[7]||(e[7]=(...n)=>t.deleteGame&&t.deleteGame(...n))},"Delete Game?")])])])}var wt=f(et,[["render",kt]]),$t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:wt});const xt={props:{hand:{type:Object,required:!0}},setup(s){return{game:g(()=>l.activeGame),user:g(()=>l.user),session:g(()=>l.activeSession),setActiveHand(){l.activeHand=s.hand}}}},At={key:0,class:"d-flex p-0"},Et={class:"col-3 p-0 border-dark border"},It={class:"px-1"},Pt={class:"col-3 p-0 border-dark border"},Tt={class:"px-1"},Ct={class:"col-6 p-0 border-dark border"},Ot={class:"px-1"},Ht={key:1,class:"col-12 p-0 border-dark border"},Gt={class:"px-1"},Vt={key:1,class:"row"},Ut={key:0,class:"d-flex p-0"},Nt={class:"col-3 p-0 border-dark border"},Rt={class:"px-1"},Bt={class:"col-3 p-0 border-dark border"},jt={class:"px-1"},Dt={class:"col-6 p-0 border-dark border"},Lt={class:"px-1"},Mt={key:1,class:"col-12 p-0 border-dark border"},qt={class:"px-1"};function Ft(s,e,o,t,r,c){return t.session.archived==!1&&t.user.isAuthenticated?(i(),d("div",{key:0,class:"row selectable",onClick:e[0]||(e[0]=(...n)=>t.setActiveHand&&t.setActiveHand(...n)),"data-bs-toggle":"modal","data-bs-target":"#edit-hand"},[t.game.bidding==!0?(i(),d("div",At,[a("div",Et,[a("span",It,p(o.hand.bid),1)]),a("div",Pt,[a("span",Tt,p(o.hand.take),1)]),a("div",Ct,[a("span",Ot,p(o.hand.score),1)])])):(i(),d("div",Ht,[a("span",Gt,p(o.hand.score),1)]))])):(i(),d("div",Vt,[t.game.bidding==!0?(i(),d("div",Ut,[a("div",Nt,[a("span",Rt,p(o.hand.bid),1)]),a("div",Bt,[a("span",jt,p(o.hand.take),1)]),a("div",Dt,[a("span",Lt,p(o.hand.score),1)])])):(i(),d("div",Mt,[a("span",qt,p(o.hand.score),1)]))]))}var zt=f(xt,[["render",Ft]]),Wt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:zt});class Kt{async getSessionsHands(e){const o=await h.get(`api/sessions/${e}/hands`);u.log("[getSessionsHands]",o.data),l.hands=o.data}async addHand(e){const o=await h.post("api/hands",e);u.log("[addHand]",o.data),l.hands=[...l.hands,o.data]}async editHand(e){let o=l.hands.findIndex(r=>r.id==e.id);const t=await h.put(`api/hands/${e.id}`,e);u.log("[editHand]",t.data),l.hands.splice(o,1,t.data)}async deleteHand(e){let o=l.hands.findIndex(r=>r.id==e);const t=await h.delete(`api/hands/${e}`);u.log("[deleteHand]",t.data),l.hands.splice(o,1)}}const N=new Kt,Yt={setup(){const s=w({}),e=V();return{editable:s,game:g(()=>l.activeGame),async handleSubmit(){try{s.value.playerId=l.activePlayer.id,s.value.sessionId=e.params.id,await N.addHand(s.value),S.getOrCreateInstance(document.getElementById("add-hand")).hide(),s.value={}}catch(o){u.error(o),b.toast(o.message,"error")}}}}},Qt={class:"container-fluid"},Zt={key:0,class:"mb-3 col-4"},Jt=a("label",{for:"bid",class:"form-label"},"Bid",-1),Xt={key:1,class:"mb-3 col-4"},ea=a("label",{for:"Take",class:"form-label"},"Take",-1),ta={key:2,class:"mb-3 col-4"},aa=a("label",{for:"Score",class:"form-label"},"Score",-1),oa={key:3,class:"mb-3"},sa=a("label",{for:"Score",class:"form-label"},"Score",-1),na=a("div",{class:""},[a("button",{class:"btn btn-success"},"Confirm")],-1);function ra(s,e,o,t,r,c){return i(),d("div",Qt,[a("form",{class:"row",onSubmit:e[4]||(e[4]=G((...n)=>t.handleSubmit&&t.handleSubmit(...n),["prevent"]))},[t.game.bidding==!0?(i(),d("div",Zt,[Jt,m(a("input",{type:"number",class:"form-control",name:"bid",id:"bid","aria-describedby":"helpId",placeholder:"0","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.bid=n)},null,512),[[_,t.editable.bid]])])):$("",!0),t.game.bidding==!0?(i(),d("div",Xt,[ea,m(a("input",{type:"number",class:"form-control",name:"Take",id:"Take","aria-describedby":"helpId",placeholder:"0","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.take=n)},null,512),[[_,t.editable.take]])])):$("",!0),t.game.bidding==!0?(i(),d("div",ta,[aa,m(a("input",{type:"number",class:"form-control",name:"Score",id:"Score","aria-describedby":"helpId",placeholder:"0","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.score=n)},null,512),[[_,t.editable.score]])])):(i(),d("div",oa,[sa,m(a("input",{type:"number",class:"form-control",name:"Score",id:"Score","aria-describedby":"helpId",placeholder:"0","onUpdate:modelValue":e[3]||(e[3]=n=>t.editable.score=n)},null,512),[[_,t.editable.score]])])),na],32)])}var la=f(Yt,[["render",ra]]),ia=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:la});const da={setup(){const s=w({});return T(()=>{s.value=l.activeHand}),{editable:s,game:g(()=>l.activeGame),async handleSubmit(){try{await N.editHand(s.value),S.getOrCreateInstance(document.getElementById("edit-hand")).hide()}catch(e){u.error(e),b.toast(e.message,"error")}},async deleteHand(){try{await b.confirm()&&(await N.deleteHand(l.activeHand.id),S.getOrCreateInstance(document.getElementById("edit-hand")).hide())}catch(e){u.error(e),b.toast(e.message,"error")}}}}},ca={class:"container-fluid"},ua={class:"row"},ma={key:0,class:"mb-3 col-4"},_a=a("label",{for:"bid",class:"form-label"},"Bid",-1),ba={key:1,class:"mb-3 col-4"},ha=a("label",{for:"Take",class:"form-label"},"Take",-1),ga={key:2,class:"mb-3 col-4"},pa=a("label",{for:"Score",class:"form-label"},"Score",-1),fa={key:3,class:"mb-3"},va=a("label",{for:"Score",class:"form-label"},"Score",-1),ya={class:"d-flex justify-content-between"};function Sa(s,e,o,t,r,c){return i(),d("div",ca,[a("div",ua,[t.game.bidding==!0?(i(),d("div",ma,[_a,m(a("input",{type:"number",class:"form-control",name:"bid",id:"bid","aria-describedby":"helpId",placeholder:"","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.bid=n)},null,512),[[_,t.editable.bid]])])):$("",!0),t.game.bidding==!0?(i(),d("div",ba,[ha,m(a("input",{type:"number",class:"form-control",name:"Take",id:"Take","aria-describedby":"helpId",placeholder:"","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.take=n)},null,512),[[_,t.editable.take]])])):$("",!0),t.game.bidding==!0?(i(),d("div",ga,[pa,m(a("input",{type:"number",class:"form-control",name:"Score",id:"Score","aria-describedby":"helpId",placeholder:"","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.score=n)},null,512),[[_,t.editable.score]])])):(i(),d("div",fa,[va,m(a("input",{type:"number",class:"form-control",name:"Score",id:"Score","aria-describedby":"helpId",placeholder:"0","onUpdate:modelValue":e[3]||(e[3]=n=>t.editable.score=n)},null,512),[[_,t.editable.score]])])),a("div",ya,[a("button",{class:"btn btn-success",onClick:e[4]||(e[4]=(...n)=>t.handleSubmit&&t.handleSubmit(...n))},"Confirm"),a("button",{class:"btn btn-danger",onClick:e[5]||(e[5]=(...n)=>t.deleteHand&&t.deleteHand(...n))},"Delete?")])])])}var ka=f(da,[["render",Sa]]),wa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ka});const $a="modulepreload",W={},xa="/",E=function(e,o){return!o||o.length===0?e():Promise.all(o.map(t=>{if(t=`${xa}${t}`,t in W)return;W[t]=!0;const r=t.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${c}`))return;const n=document.createElement("link");if(n.rel=r?"stylesheet":$a,r||(n.as="script",n.crossOrigin=""),n.href=t,document.head.appendChild(n),r)return new Promise((y,O)=>{n.addEventListener("load",y),n.addEventListener("error",O)})})).then(()=>e())};function Aa(s){switch(s){case"./pages/AboutPage.vue":return E(()=>import("./AboutPage.5e596e08.js"),["assets/AboutPage.5e596e08.js","assets/vendor.3fd9f7a9.js"]);case"./pages/AccountPage.vue":return E(()=>import("./AccountPage.aa9a577f.js"),["assets/AccountPage.aa9a577f.js","assets/AccountPage.68e73645.css","assets/vendor.3fd9f7a9.js"]);case"./pages/GamePage.vue":return E(()=>import("./GamePage.dd3a4def.js"),["assets/GamePage.dd3a4def.js","assets/vendor.3fd9f7a9.js","assets/SessionsService.1ac81414.js"]);case"./pages/HomePage.vue":return E(()=>import("./HomePage.256b24be.js"),["assets/HomePage.256b24be.js","assets/HomePage.e7fa402c.css","assets/vendor.3fd9f7a9.js"]);case"./pages/SessionPage.vue":return E(()=>import("./SessionPage.7f687b70.js"),["assets/SessionPage.7f687b70.js","assets/vendor.3fd9f7a9.js","assets/SessionsService.1ac81414.js"]);default:return new Promise(function(e,o){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+s)))})}}function I(s){return()=>Aa(`./pages/${s}.vue`)}const Ea=[{path:"/",name:"Home",component:I("HomePage")},{path:"/about",name:"About",component:I("AboutPage")},{path:"/game/:id",name:"Game",component:I("GamePage")},{path:"/session/:id",name:"Session",component:I("SessionPage")},{path:"/account",name:"Account",component:I("AccountPage"),beforeEnter:ne}],K=oe({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:se(),routes:Ea}),Ia={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class Pa{constructor(e=!1,o=F){}on(e,o){var t;return(t=this.socket)==null||t.on(e,o.bind(this)),this}onConnected(e){u.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){u.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var o;(o=this.socket)==null||o.emit(Ia.authenticate,e)}onError(e){u.error("[SOCKET_ERROR]",e)}enqueue(e,o){u.log("[ENQUEING_ACTION]",{action:e,payload:o}),this.queue.push({action:e,payload:o})}playback(){u.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(o=>{this.emit(o.action,o.payload)})}emit(e,o=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,o);if(!this.connected)return this.enqueue(e,o);this.socket.emit(e,o)}}class Ta extends Pa{constructor(){super();this.on("error",this.onError)}onError(e){b.toast(e.message,"error")}}const Y=new Ta,v=re({domain:be,clientId:he,audience:ge,useRefreshTokens:!0,onRedirectCallback:s=>{K.push(s&&s.targetUrl?s.targetUrl:window.location.pathname)}});v.on(v.AUTH_EVENTS.AUTHENTICATED,async function(){h.defaults.headers.authorization=v.bearer,h.interceptors.request.use(Ca),l.user=v.user,await z.getAccount(),Y.authenticate(v.bearer)});async function Ca(s){if(!v.isAuthenticated)return s;const e=v.identity.exp*1e3,o=e<Date.now(),t=e<Date.now()+1e3*60*60*12;return o?await v.loginWithPopup():t&&(await v.getTokenSilently(),h.defaults.headers.authorization=v.bearer,Y.authenticate(v.bearer)),s}const Oa={setup(){return{user:g(()=>l.user),account:g(()=>l.account),async login(){v.loginWithPopup()},async logout(){v.logout({returnTo:window.location.origin})}}}},Q=s=>(D("data-v-5cf05aea"),s=s(),L(),s),Ha={class:"navbar-text"},Ga={key:1,class:"dropdown my-2 my-lg-0"},Va={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},Ua={key:0},Na=["src"],Ra={class:"mx-3 text-success lighten-30"},Ba={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},ja=Q(()=>a("div",{class:"list-group-item list-group-item-action hoverable","data-bs-toggle":"modal","data-bs-target":"#edit-account"}," Manage Account ",-1)),Da=Q(()=>a("i",{class:"mdi mdi-logout"},null,-1)),La=H(" logout "),Ma=[Da,La];function qa(s,e,o,t,r,c){return i(),d("span",Ha,[t.user.isAuthenticated?(i(),d("div",Ga,[a("div",Va,[t.account.picture?(i(),d("div",Ua,[a("img",{src:t.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,Na),a("span",Ra,p(t.account.name),1)])):$("",!0)]),a("div",Ba,[ja,a("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...n)=>t.logout&&t.logout(...n))},Ma)])])):(i(),d("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...n)=>t.login&&t.login(...n))}," Login "))])}var Fa=f(Oa,[["render",qa],["__scopeId","data-v-5cf05aea"]]),za=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Fa});const Wa={},Ka={class:"modal fade",tabindex:"-1"},Ya={class:"modal-dialog modal-dialog-centered",role:"document"},Qa={class:"modal-content"},Za={class:"modal-header"},Ja={class:"modal-title"},Xa=a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),eo={class:"modal-body"};function to(s,e){return i(),d("div",Ka,[a("div",Ya,[a("div",Qa,[a("div",Za,[a("h5",Ja,[M(s.$slots,"title")]),Xa]),a("div",eo,[M(s.$slots,"body")])])])])}var ao=f(Wa,[["render",to]]),oo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ao});const so={setup(){return{games:g(()=>l.games)}}},Z=s=>(D("data-v-022fc94a"),s=s(),L(),s),no={class:"navbar navbar-expand-lg navbar-dark bg-primary px-3"},ro=Z(()=>a("div",{class:"d-flex flex-column align-items-center"},[a("h1",null,"Scorekeeper!")],-1)),lo=Z(()=>a("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[a("span",{class:"navbar-toggler-icon"})],-1)),io={class:"collapse navbar-collapse",id:"navbarText"},co={class:"navbar-nav me-auto"},uo=H(" About ");function mo(s,e,o,t,r,c){const n=x("router-link"),y=x("Login");return i(),d("nav",no,[k(n,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:P(()=>[ro]),_:1}),lo,a("div",io,[a("ul",co,[a("li",null,[k(n,{to:{name:"About"},class:"btn text-success lighten-30 selectable text-uppercase"},{default:P(()=>[uo]),_:1})])]),k(y)])])}var _o=f(so,[["render",mo],["__scopeId","data-v-022fc94a"]]),bo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_o});const ho={props:{player:{type:Object,required:!0}},setup(s){const e=w({});return V(),{editable:e,hands:g(()=>l.hands.filter(o=>o.playerId==s.player.id)),game:g(()=>l.activeGame),user:g(()=>l.user),session:g(()=>l.activeSession),totalScore:g(()=>{let o=0;return l.hands.filter(r=>r.playerId==s.player.id).forEach(r=>o+=r.score),o}),setActivePlayer(){l.activePlayer=s.player}}}},go={class:"row p-2"},po={class:"col-12 d-flex flex-column"},fo={class:"d-flex align-items-center"},vo={key:1,class:"m-0 me-4"},yo={class:"row border-bottom border-dark"},So={key:0,class:"col-3 p-0"},ko={key:1,class:"col-3 p-0"},wo=a("div",{class:"col-6 text-center p-0"},"SCORE",-1),$o={class:"row"};function xo(s,e,o,t,r,c){const n=x("Hand");return i(),d("div",go,[a("div",po,[a("div",fo,[t.session.archived==!1&&t.user.isAuthenticated?(i(),d("h5",{key:0,onClick:e[0]||(e[0]=(...y)=>t.setActivePlayer&&t.setActivePlayer(...y)),class:"m-0 me-4 selectable","data-bs-toggle":"modal","data-bs-target":"#player-edit"},p(o.player.name),1)):(i(),d("h5",vo,p(o.player.name),1)),t.session.archived==!1&&t.user.isAuthenticated?(i(),d("i",{key:2,class:"mdi mdi-plus selectable text-dark fs-5",title:"Add hand",onClick:e[1]||(e[1]=(...y)=>t.setActivePlayer&&t.setActivePlayer(...y)),"data-bs-toggle":"modal","data-bs-target":"#add-hand"})):$("",!0)]),a("div",yo,[t.game.bidding==!0?(i(),d("div",So,"BID")):$("",!0),t.game.bidding==!0?(i(),d("div",ko,"TAKE")):$("",!0),wo]),a("div",$o,[(i(!0),d(B,null,le(t.hands,y=>(i(),d("div",{class:"col-12",key:y.id},[k(n,{hand:y},null,8,["hand"])]))),128))]),a("h5",null,"Total = "+p(t.totalScore),1)])])}var Ao=f(ho,[["render",xo]]),Eo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ao});class Io{async getSessionsPlayers(e){const o=await h.get(`api/sessions/${e}/players`);u.log("[getSessionsPlayers]",o.data),l.players=o.data}async addPlayer(e){const o=await h.post("api/players",e);u.log("[addPlayers]",o.data),l.players=[...l.players,o.data]}async editPlayer(e){u.error("Not set up")}async deletePlayer(e){u.error("Not set up")}}const R=new Io,Po={setup(){const s=w({}),e=V();return{editable:s,async handleSubmit(){try{s.value.sessionId=e.params.id,await R.addPlayer(s.value),S.getOrCreateInstance(document.getElementById("player-add")).hide(),s.value={}}catch(o){u.error(o),b.toast(o.message,"error")}}}}},To={class:"container-fluid"},Co={class:"mb-3 col-12"},Oo=a("label",{for:"name",class:"form-label"},"Name",-1),Ho=a("div",{class:""},[a("button",{class:"btn btn-success"},"Confirm")],-1);function Go(s,e,o,t,r,c){return i(),d("div",To,[a("form",{onSubmit:e[1]||(e[1]=G((...n)=>t.handleSubmit&&t.handleSubmit(...n),["prevent"])),class:"row"},[a("div",Co,[Oo,m(a("input",{type:"text",class:"form-control",name:"name",id:"name","aria-describedby":"helpId",placeholder:"Name...","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.name=n),required:""},null,512),[[_,t.editable.name]])]),Ho],32)])}var Vo=f(Po,[["render",Go]]),Uo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Vo});const No={setup(){const s=w({});return T(()=>{s.value=l.activePlayer}),{editable:s,async handleSubmit(){try{await R.editPlayer(s.value),S.getOrCreateInstance(document.getElementById("player-edit")).hide(),s.value={}}catch(e){u.error(e),b.toast(e.message,"error")}},async deletePlayer(){try{await b.confirm()&&(await R.deletePlayer(l.activePlayer.id),S.getOrCreateInstance(document.getElementById("player-edit")).hide(),b.toast("Player deleted","success"))}catch(e){u.error(e),b.toast(e.message,"error")}}}}},Ro={class:"container-fluid"},Bo={class:"row"},jo={class:"mb-3 col-12"},Do=a("label",{for:"name",class:"form-label"},"Name",-1),Lo={class:"d-flex justify-content-between"},Mo={class:""},qo={class:""};function Fo(s,e,o,t,r,c){return i(),d("div",Ro,[a("div",Bo,[a("div",jo,[Do,m(a("input",{type:"text",class:"form-control",name:"name",id:"name","aria-describedby":"helpId",placeholder:"Name...","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.name=n),required:""},null,512),[[_,t.editable.name]])]),a("div",Lo,[a("div",Mo,[a("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...n)=>t.handleSubmit&&t.handleSubmit(...n))},"Confirm")]),a("div",qo,[a("button",{class:"btn btn-danger",onClick:e[2]||(e[2]=(...n)=>t.deletePlayer&&t.deletePlayer(...n))}," Delete Player ")])])])])}var zo=f(No,[["render",Fo]]),Wo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:zo});const Ko={props:{session:{type:Object,required:!0}},setup(s){return{date:g(()=>new Date(s.session.createdAt).toLocaleString())}}},Yo={class:"m-0"};function Qo(s,e,o,t,r,c){return i(),d("h3",Yo,p(t.date)+" || "+p(o.session.winner),1)}var Zo=f(Ko,[["render",Qo]]),Jo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Zo});function Xo(s){Object.entries({"./components/AccountEditForm.vue":Ie,"./components/GameAddForm.vue":Xe,"./components/GameEditForm.vue":$t,"./components/Hand.vue":Wt,"./components/HandAddForm.vue":ia,"./components/HandEditForm.vue":wa,"./components/Login.vue":za,"./components/Modal.vue":oo,"./components/Navbar.vue":bo,"./components/Player.vue":Eo,"./components/PlayerAddForm.vue":Uo,"./components/PlayerEditForm.vue":Wo,"./components/Session.vue":Jo}).forEach(([o,t])=>{const r=t.name||o.substr(o.lastIndexOf("/")+1).replace(/\.\w+$/,"");s.component(r,t.default)})}const J=ie(_e);Xo(J);J.use(K).mount("#app");export{l as A,b as P,f as _,h as a,U as g,N as h,u as l,R as p};
