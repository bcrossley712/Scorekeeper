import{r as ee,c as g,a as x,o as i,b as d,d as o,e as k,w as P,F as R,f as H,S as j,g as te,h as w,i as T,M as S,j as m,v as _,k as C,l as G,u as oe,t as p,m as U,n as $,p as ae,q as se,s as ne,x as re,y as D,z as L,A as M,B as le,C as ie,D as de}from"./vendor.bcce830c.js";const ce=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}};ce();const l=ee({user:{},account:{},games:[],activeGame:{},sessions:[],activeSession:{},players:[],activePlayer:{},hands:[],activeHand:{}});var f=(s,e)=>{for(const[a,t]of e)s[a]=t;return s};const ue={name:"App",setup(){return{appState:g(()=>l)}}},me=H("Edit Account?");function _e(s,e,a,t,r,c){const n=x("Navbar"),y=x("router-view"),O=x("AccountEditForm"),X=x("Modal");return i(),d(R,null,[o("header",null,[k(n)]),o("main",null,[k(y)]),k(X,{id:"edit-account"},{title:P(()=>[me]),body:P(()=>[k(O)]),_:1})],64)}var be=f(ue,[["render",_e]]);class b{static async confirm(e="Are you sure?",a="You won't be able to revert this!",t="warning",r="Yes, delete it!"){try{return!!(await j.fire({title:e,text:a,icon:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",a="warning",t="top-end",r=3e3,c=!0){j.fire({title:e,icon:a,position:t,timer:r,timerProgressBar:c,toast:!0,showConfirmButton:!1})}}const q=window.location.origin.includes("localhost"),F=q?"http://localhost:3000":"",he="dev-bcrossley712.us.auth0.com",ge="omph0kyWMR2mKaoZphUvm7lVBfiDkRPf",pe="https://brian-dev.com";function A(s,e){if(q)console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(s){case"log":case"assert":return}console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const u={log(){A("log",arguments)},error(){A("error",arguments)},warn(){A("warn",arguments)},assert(){A("assert",arguments)},trace(){A("trace",arguments)}},h=te.create({baseURL:F,timeout:8e3});class fe{async getAccount(){try{const e=await h.get("/account");l.account=e.data}catch(e){u.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async editAccount(e){const a=await h.put("/account",e);u.log("[editAccount]",a.data),l.account=a.data}}const z=new fe,ve={setup(){const s=w({});return T(()=>{s.value=l.account}),{editable:s,async handleSubmit(){try{await z.editAccount(s.value),S.getOrCreateInstance(document.getElementById("edit-account")).hide(),b.toast("Account updated!","success")}catch(e){u.error(e),b.toast(e.message,"error")}}}}},ye={class:"container-fluid"},Se={class:"row"},ke={class:"mb-3 col-12"},we=o("label",{for:"name",class:"form-label"},"Name",-1),$e={class:"mb-3 col-12"},xe=o("label",{for:"picture",class:"form-label"},"Picture",-1),Ae={class:"d-flex justify-content-end"};function Ee(s,e,a,t,r,c){return i(),d("div",ye,[o("div",Se,[o("div",ke,[we,m(o("input",{type:"text",class:"form-control",name:"name",id:"name","aria-describedby":"helpId",placeholder:"Name...","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.name=n),required:""},null,512),[[_,t.editable.name]])]),o("div",$e,[xe,m(o("input",{type:"text",class:"form-control",name:"picture",id:"picture","aria-describedby":"helpId",placeholder:"Picture...","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.picture=n),required:""},null,512),[[_,t.editable.picture]])]),o("div",Ae,[o("button",{class:"btn btn-success",onClick:e[2]||(e[2]=(...n)=>t.handleSubmit&&t.handleSubmit(...n))},"Confirm")])])])}var Ie=f(ve,[["render",Ee]]),Pe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ie});class Te{async getGames(){const e=await h.get("api/games");u.log("[getGames]",e.data),l.games=e.data}async getGameById(e){const a=await h.get(`api/games/${e}`);return u.log("[getGameById]",a.data),l.activeGame=a.data,a.data}async addGame(e){const a=await h.post("api/games",e);u.log("[addGame]",a.data),l.games=[...l.games,a.data]}async editGame(e){let a=l.games.findIndex(r=>r.id==e.id);const t=await h.put(`api/games/${e.id}`,e);u.log("[editGame]",t.data),l.games.splice(a,1,t.data)}async deleteGame(e){let a=l.games.findIndex(r=>r.id==e);const t=await h.delete(`api/games/${e}`);u.log("[deleteGame]",t.data),l.games.splice(a,1)}}const V=new Te,Ce={setup(){const s=w({});return{editable:s,async handleSubmit(){try{await V.addGame(s.value),S.getOrCreateInstance(document.getElementById("add-game")).hide(),s.value={}}catch(e){u.error(e),b.toast(e.message,"error")}}}}},Oe={class:"container-fluid"},He={class:"col-12"},Ge={class:"mb-3"},Ue=o("label",{for:"title",class:"form-label"},"Game Title",-1),Ve={class:"col-12"},Ne={class:"mb-3"},Be=o("label",{for:"Image",class:"form-label"},"Url Image",-1),Re={class:"col-12"},je={class:"mb-3"},De=o("label",{for:"Scoring",class:"form-label"},"Scoring",-1),Le={class:"col-12"},Me={class:"mb-3"},qe=o("label",{for:"Rules",class:"form-label"},"How to play",-1),Fe={class:"col-6"},ze={class:"form-check"},We=o("label",{class:"form-check-label",for:"bidding"}," Bidding game? ",-1),Ke={class:"col-6"},Ye={class:"form-check"},Qe=o("label",{class:"form-check-label",for:"lowScoreWins"}," Low Score Wins? ",-1),Ze=o("div",{class:"p-2"},[o("button",{class:"btn btn-success"},"Submit")],-1);function Je(s,e,a,t,r,c){return i(),d("div",Oe,[o("form",{class:"row",onSubmit:e[6]||(e[6]=G((...n)=>t.handleSubmit&&t.handleSubmit(...n),["prevent"]))},[o("div",He,[o("div",Ge,[Ue,m(o("input",{type:"text",class:"form-control",name:"title",id:"title","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.title=n),placeholder:"Title...",required:""},null,512),[[_,t.editable.title]])])]),o("div",Ve,[o("div",Ne,[Be,m(o("input",{type:"text",class:"form-control",name:"Image",id:"Image","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.image=n),placeholder:"https://thiscatdoesnotexist.com..."},null,512),[[_,t.editable.image]])])]),o("div",Re,[o("div",je,[De,m(o("input",{type:"text",class:"form-control",name:"Scoring",id:"Scoring","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.scoring=n),placeholder:"Each hand taken is worth 10..."},null,512),[[_,t.editable.scoring]])])]),o("div",Le,[o("div",Me,[qe,m(o("input",{type:"text",class:"form-control",name:"Rules",id:"Rules","onUpdate:modelValue":e[3]||(e[3]=n=>t.editable.rules=n),placeholder:"Dealer deals 5 cards..."},null,512),[[_,t.editable.rules]])])]),o("div",Fe,[o("div",ze,[m(o("input",{class:"form-check-input",type:"checkbox",value:"false",id:"bidding","onUpdate:modelValue":e[4]||(e[4]=n=>t.editable.bidding=n)},null,512),[[C,t.editable.bidding]]),We])]),o("div",Ke,[o("div",Ye,[m(o("input",{class:"form-check-input",type:"checkbox",value:"false",id:"lowScoreWins","onUpdate:modelValue":e[5]||(e[5]=n=>t.editable.lowScoreWins=n)},null,512),[[C,t.editable.lowScoreWins]]),Qe])]),Ze],32)])}var Xe=f(Ce,[["render",Je]]),et=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Xe});const tt={setup(){const s=w({}),e=oe();return T(()=>s.value=l.activeGame),{editable:s,async handleSubmit(){try{await V.editGame(s.value),S.getOrCreateInstance(document.getElementById("edit-game")).hide(),s.value={}}catch(a){u.error(a),b.toast("Are you logged in?","error","center")}},async deleteGame(){try{await b.confirm("Are you sure?","All game data and history will be lost forever!","info","Yes, Delete!")&&await b.confirm("Okay but are you really really sure??","","info","I said yes!")&&(S.getOrCreateInstance(document.getElementById("edit-game")).hide(),await V.deleteGame(l.activeGame.id),e.push({name:"Home"}),b.toast("Game deleted","success"))}catch(a){u.error(a),b.toast(a.message,"error")}}}}},ot={class:"container-fluid"},at={class:"row"},st={class:"col-12"},nt={class:"mb-3"},rt=o("label",{for:"title",class:"form-label"},"Game Title",-1),lt={class:"col-12"},it={class:"mb-3"},dt=o("label",{for:"Image",class:"form-label"},"Url Image",-1),ct={class:"col-12"},ut={class:"mb-3"},mt=o("label",{for:"Scoring",class:"form-label"},"Scoring",-1),_t={class:"col-12"},bt={class:"mb-3"},ht=o("label",{for:"Rules",class:"form-label"},"How to play",-1),gt={class:"col-6"},pt={class:"form-check"},ft=o("label",{class:"form-check-label",for:"bidding"}," Bidding game? ",-1),vt={class:"col-6"},yt={class:"form-check"},St=o("label",{class:"form-check-label",for:"lowScoreWins"}," Low Score Wins? ",-1),kt={class:"d-flex justify-content-between p-2"};function wt(s,e,a,t,r,c){return i(),d("div",ot,[o("div",at,[o("div",st,[o("div",nt,[rt,m(o("input",{type:"text",class:"form-control",name:"title",id:"title","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.title=n),placeholder:"Title...",required:""},null,512),[[_,t.editable.title]])])]),o("div",lt,[o("div",it,[dt,m(o("input",{type:"text",class:"form-control",name:"Image",id:"Image","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.image=n),placeholder:"https://thiscatdoesnotexist.com..."},null,512),[[_,t.editable.image]])])]),o("div",ct,[o("div",ut,[mt,m(o("input",{type:"text",class:"form-control",name:"Scoring",id:"Scoring","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.scoring=n),placeholder:"Each hand taken is worth 10..."},null,512),[[_,t.editable.scoring]])])]),o("div",_t,[o("div",bt,[ht,m(o("input",{type:"text",class:"form-control",name:"Rules",id:"Rules","onUpdate:modelValue":e[3]||(e[3]=n=>t.editable.rules=n),placeholder:"Dealer deals 5 cards..."},null,512),[[_,t.editable.rules]])])]),o("div",gt,[o("div",pt,[m(o("input",{class:"form-check-input",type:"checkbox",value:"false",id:"bidding","onUpdate:modelValue":e[4]||(e[4]=n=>t.editable.bidding=n)},null,512),[[C,t.editable.bidding]]),ft])]),o("div",vt,[o("div",yt,[m(o("input",{class:"form-check-input",type:"checkbox",value:"false",id:"lowScoreWins","onUpdate:modelValue":e[5]||(e[5]=n=>t.editable.lowScoreWins=n)},null,512),[[C,t.editable.lowScoreWins]]),St])]),o("div",kt,[o("button",{class:"btn btn-success",onClick:e[6]||(e[6]=(...n)=>t.handleSubmit&&t.handleSubmit(...n))},"Submit"),o("button",{class:"btn btn-danger",onClick:e[7]||(e[7]=(...n)=>t.deleteGame&&t.deleteGame(...n))},"Delete Game?")])])])}var $t=f(tt,[["render",wt]]),xt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:$t});const At={props:{hand:{type:Object,required:!0}},setup(s){return{game:g(()=>l.activeGame),user:g(()=>l.user),session:g(()=>l.activeSession),setActiveHand(){l.activeHand=s.hand}}}},Et={key:0,class:"d-flex p-0"},It={class:"col-3 p-0 border-dark border"},Pt={class:"px-1"},Tt={class:"col-3 p-0 border-dark border"},Ct={class:"px-1"},Ot={class:"col-6 p-0 border-dark border"},Ht={class:"px-1"},Gt={key:1,class:"col-12 p-0 border-dark border"},Ut={class:"px-1"},Vt={key:1,class:"row"},Nt={key:0,class:"d-flex p-0"},Bt={class:"col-3 p-0 border-dark border"},Rt={class:"px-1"},jt={class:"col-3 p-0 border-dark border"},Dt={class:"px-1"},Lt={class:"col-6 p-0 border-dark border"},Mt={class:"px-1"},qt={key:1,class:"col-12 p-0 border-dark border"},Ft={class:"px-1"};function zt(s,e,a,t,r,c){return t.session.archived==!1&&t.user.isAuthenticated?(i(),d("div",{key:0,class:"row selectable",onClick:e[0]||(e[0]=(...n)=>t.setActiveHand&&t.setActiveHand(...n)),"data-bs-toggle":"modal","data-bs-target":"#edit-hand"},[t.game.bidding==!0?(i(),d("div",Et,[o("div",It,[o("span",Pt,p(a.hand.bid),1)]),o("div",Tt,[o("span",Ct,p(a.hand.take),1)]),o("div",Ot,[o("span",Ht,p(a.hand.score),1)])])):(i(),d("div",Gt,[o("span",Ut,p(a.hand.score),1)]))])):(i(),d("div",Vt,[t.game.bidding==!0?(i(),d("div",Nt,[o("div",Bt,[o("span",Rt,p(a.hand.bid),1)]),o("div",jt,[o("span",Dt,p(a.hand.take),1)]),o("div",Lt,[o("span",Mt,p(a.hand.score),1)])])):(i(),d("div",qt,[o("span",Ft,p(a.hand.score),1)]))]))}var Wt=f(At,[["render",zt]]),Kt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Wt});class Yt{async getSessionsHands(e){const a=await h.get(`api/sessions/${e}/hands`);u.log("[getSessionsHands]",a.data),l.hands=a.data}async addHand(e){const a=await h.post("api/hands",e);u.log("[addHand]",a.data),l.hands=[...l.hands,a.data]}async editHand(e){let a=l.hands.findIndex(r=>r.id==e.id);const t=await h.put(`api/hands/${e.id}`,e);u.log("[editHand]",t.data),l.hands.splice(a,1,t.data)}async deleteHand(e){let a=l.hands.findIndex(r=>r.id==e);const t=await h.delete(`api/hands/${e}`);u.log("[deleteHand]",t.data),l.hands.splice(a,1)}}const N=new Yt,Qt={setup(){const s=w({}),e=U();return{editable:s,game:g(()=>l.activeGame),async handleSubmit(){try{s.value.playerId=l.activePlayer.id,s.value.sessionId=e.params.id,await N.addHand(s.value),S.getOrCreateInstance(document.getElementById("add-hand")).hide(),s.value={}}catch(a){u.error(a),b.toast(a.message,"error")}}}}},Zt={class:"container-fluid"},Jt={key:0,class:"mb-3 col-4"},Xt=o("label",{for:"bid",class:"form-label"},"Bid",-1),eo={key:1,class:"mb-3 col-4"},to=o("label",{for:"Take",class:"form-label"},"Take",-1),oo={key:2,class:"mb-3 col-4"},ao=o("label",{for:"Score",class:"form-label"},"Score",-1),so={key:3,class:"mb-3"},no=o("label",{for:"Score",class:"form-label"},"Score",-1),ro=o("div",{class:""},[o("button",{class:"btn btn-success"},"Confirm")],-1);function lo(s,e,a,t,r,c){return i(),d("div",Zt,[o("form",{class:"row",onSubmit:e[4]||(e[4]=G((...n)=>t.handleSubmit&&t.handleSubmit(...n),["prevent"]))},[t.game.bidding==!0?(i(),d("div",Jt,[Xt,m(o("input",{type:"number",class:"form-control",name:"bid",id:"bid","aria-describedby":"helpId",placeholder:"0","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.bid=n)},null,512),[[_,t.editable.bid]])])):$("",!0),t.game.bidding==!0?(i(),d("div",eo,[to,m(o("input",{type:"number",class:"form-control",name:"Take",id:"Take","aria-describedby":"helpId",placeholder:"0","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.take=n)},null,512),[[_,t.editable.take]])])):$("",!0),t.game.bidding==!0?(i(),d("div",oo,[ao,m(o("input",{type:"number",class:"form-control",name:"Score",id:"Score","aria-describedby":"helpId",placeholder:"0","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.score=n)},null,512),[[_,t.editable.score]])])):(i(),d("div",so,[no,m(o("input",{type:"number",class:"form-control",name:"Score",id:"Score","aria-describedby":"helpId",placeholder:"0","onUpdate:modelValue":e[3]||(e[3]=n=>t.editable.score=n)},null,512),[[_,t.editable.score]])])),ro],32)])}var io=f(Qt,[["render",lo]]),co=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:io});const uo={setup(){const s=w({});return T(()=>{s.value=l.activeHand}),{editable:s,game:g(()=>l.activeGame),async handleSubmit(){try{await N.editHand(s.value),S.getOrCreateInstance(document.getElementById("edit-hand")).hide()}catch(e){u.error(e),b.toast(e.message,"error")}},async deleteHand(){try{await b.confirm()&&(await N.deleteHand(l.activeHand.id),S.getOrCreateInstance(document.getElementById("edit-hand")).hide())}catch(e){u.error(e),b.toast(e.message,"error")}}}}},mo={class:"container-fluid"},_o={class:"row"},bo={key:0,class:"mb-3 col-4"},ho=o("label",{for:"bid",class:"form-label"},"Bid",-1),go={key:1,class:"mb-3 col-4"},po=o("label",{for:"Take",class:"form-label"},"Take",-1),fo={key:2,class:"mb-3 col-4"},vo=o("label",{for:"Score",class:"form-label"},"Score",-1),yo={key:3,class:"mb-3"},So=o("label",{for:"Score",class:"form-label"},"Score",-1),ko={class:"d-flex justify-content-between"};function wo(s,e,a,t,r,c){return i(),d("div",mo,[o("div",_o,[t.game.bidding==!0?(i(),d("div",bo,[ho,m(o("input",{type:"number",class:"form-control",name:"bid",id:"bid","aria-describedby":"helpId",placeholder:"","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.bid=n)},null,512),[[_,t.editable.bid]])])):$("",!0),t.game.bidding==!0?(i(),d("div",go,[po,m(o("input",{type:"number",class:"form-control",name:"Take",id:"Take","aria-describedby":"helpId",placeholder:"","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.take=n)},null,512),[[_,t.editable.take]])])):$("",!0),t.game.bidding==!0?(i(),d("div",fo,[vo,m(o("input",{type:"number",class:"form-control",name:"Score",id:"Score","aria-describedby":"helpId",placeholder:"","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.score=n)},null,512),[[_,t.editable.score]])])):(i(),d("div",yo,[So,m(o("input",{type:"number",class:"form-control",name:"Score",id:"Score","aria-describedby":"helpId",placeholder:"0","onUpdate:modelValue":e[3]||(e[3]=n=>t.editable.score=n)},null,512),[[_,t.editable.score]])])),o("div",ko,[o("button",{class:"btn btn-success",onClick:e[4]||(e[4]=(...n)=>t.handleSubmit&&t.handleSubmit(...n))},"Confirm"),o("button",{class:"btn btn-danger",onClick:e[5]||(e[5]=(...n)=>t.deleteHand&&t.deleteHand(...n))},"Delete?")])])])}var $o=f(uo,[["render",wo]]),xo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:$o});const Ao="modulepreload",W={},Eo="/",E=function(e,a){return!a||a.length===0?e():Promise.all(a.map(t=>{if(t=`${Eo}${t}`,t in W)return;W[t]=!0;const r=t.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${c}`))return;const n=document.createElement("link");if(n.rel=r?"stylesheet":Ao,r||(n.as="script",n.crossOrigin=""),n.href=t,document.head.appendChild(n),r)return new Promise((y,O)=>{n.addEventListener("load",y),n.addEventListener("error",O)})})).then(()=>e())};function Io(s){switch(s){case"./pages/AboutPage.vue":return E(()=>import("./AboutPage.69e3b245.js"),["assets/AboutPage.69e3b245.js","assets/vendor.bcce830c.js"]);case"./pages/AccountPage.vue":return E(()=>import("./AccountPage.aaf31914.js"),["assets/AccountPage.aaf31914.js","assets/AccountPage.1d38451d.css","assets/vendor.bcce830c.js"]);case"./pages/GamePage.vue":return E(()=>import("./GamePage.9ee4261f.js"),["assets/GamePage.9ee4261f.js","assets/vendor.bcce830c.js","assets/SessionsService.67291e55.js"]);case"./pages/HomePage.vue":return E(()=>import("./HomePage.209204c3.js"),["assets/HomePage.209204c3.js","assets/HomePage.e7fa402c.css","assets/vendor.bcce830c.js"]);case"./pages/SessionPage.vue":return E(()=>import("./SessionPage.789d914a.js"),["assets/SessionPage.789d914a.js","assets/vendor.bcce830c.js","assets/SessionsService.67291e55.js"]);default:return new Promise(function(e,a){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+s)))})}}function I(s){return()=>Io(`./pages/${s}.vue`)}const Po=[{path:"/",name:"Home",component:I("HomePage")},{path:"/about",name:"About",component:I("AboutPage")},{path:"/game/:id",name:"Game",component:I("GamePage")},{path:"/session/:id",name:"Session",component:I("SessionPage")},{path:"/account",name:"Account",component:I("AccountPage"),beforeEnter:ne}],K=ae({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:se(),routes:Po}),To={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class Co{constructor(e=!1,a=F){}on(e,a){var t;return(t=this.socket)==null||t.on(e,a.bind(this)),this}onConnected(e){u.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){u.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var a;(a=this.socket)==null||a.emit(To.authenticate,e)}onError(e){u.error("[SOCKET_ERROR]",e)}enqueue(e,a){u.log("[ENQUEING_ACTION]",{action:e,payload:a}),this.queue.push({action:e,payload:a})}playback(){u.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(a=>{this.emit(a.action,a.payload)})}emit(e,a=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,a);if(!this.connected)return this.enqueue(e,a);this.socket.emit(e,a)}}class Oo extends Co{constructor(){super();this.on("error",this.onError)}onError(e){b.toast(e.message,"error")}}const Y=new Oo,v=re({domain:he,clientId:ge,audience:pe,useRefreshTokens:!0,onRedirectCallback:s=>{K.push(s&&s.targetUrl?s.targetUrl:window.location.pathname)}});v.on(v.AUTH_EVENTS.AUTHENTICATED,async function(){h.defaults.headers.authorization=v.bearer,h.interceptors.request.use(Ho),l.user=v.user,await z.getAccount(),Y.authenticate(v.bearer)});async function Ho(s){if(!v.isAuthenticated)return s;const e=v.identity.exp*1e3,a=e<Date.now(),t=e<Date.now()+1e3*60*60*12;return a?await v.loginWithPopup():t&&(await v.getTokenSilently(),h.defaults.headers.authorization=v.bearer,Y.authenticate(v.bearer)),s}const Go={setup(){return{user:g(()=>l.user),account:g(()=>l.account),async login(){v.loginWithPopup()},async logout(){v.logout({returnTo:window.location.origin})}}}},Q=s=>(D("data-v-4c41e3aa"),s=s(),L(),s),Uo={class:"navbar-text"},Vo={key:1,class:"dropdown my-2 my-lg-0"},No={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},Bo={key:0},Ro=["src"],jo={class:"mx-3 text-success lighten-30"},Do={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},Lo=Q(()=>o("div",{class:"list-group-item list-group-item-action hoverable","data-bs-toggle":"modal","data-bs-target":"#edit-account"}," Manage Account ",-1)),Mo=Q(()=>o("i",{class:"mdi mdi-logout"},null,-1)),qo=H(" logout "),Fo=[Mo,qo];function zo(s,e,a,t,r,c){return i(),d("span",Uo,[t.user.isAuthenticated?(i(),d("div",Vo,[o("div",No,[t.account.picture?(i(),d("div",Bo,[o("img",{src:t.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,Ro),o("span",jo,p(t.account.name),1)])):$("",!0)]),o("div",Do,[Lo,o("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...n)=>t.logout&&t.logout(...n))},Fo)])])):(i(),d("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...n)=>t.login&&t.login(...n))}," Login "))])}var Wo=f(Go,[["render",zo],["__scopeId","data-v-4c41e3aa"]]),Ko=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Wo});const Yo={},Qo={class:"modal fade",tabindex:"-1"},Zo={class:"modal-dialog modal-dialog-centered",role:"document"},Jo={class:"modal-content"},Xo={class:"modal-header"},ea={class:"modal-title"},ta=o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),oa={class:"modal-body"};function aa(s,e){return i(),d("div",Qo,[o("div",Zo,[o("div",Jo,[o("div",Xo,[o("h5",ea,[M(s.$slots,"title")]),ta]),o("div",oa,[M(s.$slots,"body")])])])])}var sa=f(Yo,[["render",aa]]),na=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:sa});const ra={setup(){return{games:g(()=>l.games)}}},Z=s=>(D("data-v-022fc94a"),s=s(),L(),s),la={class:"navbar navbar-expand-lg navbar-dark bg-primary px-3"},ia=Z(()=>o("div",{class:"d-flex flex-column align-items-center"},[o("h1",null,"Scorekeeper!")],-1)),da=Z(()=>o("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[o("span",{class:"navbar-toggler-icon"})],-1)),ca={class:"collapse navbar-collapse",id:"navbarText"},ua={class:"navbar-nav me-auto"},ma=H(" About ");function _a(s,e,a,t,r,c){const n=x("router-link"),y=x("Login");return i(),d("nav",la,[k(n,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:P(()=>[ia]),_:1}),da,o("div",ca,[o("ul",ua,[o("li",null,[k(n,{to:{name:"About"},class:"btn text-success lighten-30 selectable text-uppercase"},{default:P(()=>[ma]),_:1})])]),k(y)])])}var ba=f(ra,[["render",_a],["__scopeId","data-v-022fc94a"]]),ha=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ba});const ga={props:{player:{type:Object,required:!0}},setup(s){const e=w({});return U(),{editable:e,hands:g(()=>l.hands.filter(a=>a.playerId==s.player.id)),game:g(()=>l.activeGame),user:g(()=>l.user),session:g(()=>l.activeSession),totalScore:g(()=>{let a=0;return l.hands.filter(r=>r.playerId==s.player.id).forEach(r=>a+=r.score),a}),setActivePlayer(){l.activePlayer=s.player}}}},pa={class:"row p-2"},fa={class:"col-12 d-flex flex-column"},va={class:"d-flex align-items-center"},ya={key:1,class:"m-0 me-4 border-bottom border-dark"},Sa={class:"row border-bottom border-dark"},ka={key:0,class:"col-3 p-0"},wa={key:1,class:"col-3 p-0"},$a=o("div",{class:"col-6 text-center p-0"},"SCORE",-1),xa={class:"row"};function Aa(s,e,a,t,r,c){const n=x("Hand");return i(),d("div",pa,[o("div",fa,[o("div",va,[t.session.archived==!1&&t.user.isAuthenticated?(i(),d("h5",{key:0,onClick:e[0]||(e[0]=(...y)=>t.setActivePlayer&&t.setActivePlayer(...y)),class:"m-0 me-4 selectable border-bottom border-dark","data-bs-toggle":"modal","data-bs-target":"#player-edit"},p(a.player.name),1)):(i(),d("h5",ya,p(a.player.name),1)),t.session.archived==!1&&t.user.isAuthenticated?(i(),d("i",{key:2,class:"mdi mdi-plus selectable text-dark fs-5",title:"Add hand",onClick:e[1]||(e[1]=(...y)=>t.setActivePlayer&&t.setActivePlayer(...y)),"data-bs-toggle":"modal","data-bs-target":"#add-hand"})):$("",!0)]),o("div",Sa,[t.game.bidding==!0?(i(),d("div",ka,"BID")):$("",!0),t.game.bidding==!0?(i(),d("div",wa,"TAKE")):$("",!0),$a]),o("div",xa,[(i(!0),d(R,null,le(t.hands,y=>(i(),d("div",{class:"col-12",key:y.id},[k(n,{hand:y},null,8,["hand"])]))),128))]),o("h5",null,"Total = "+p(t.totalScore),1)])])}var Ea=f(ga,[["render",Aa]]),Ia=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ea});class Pa{async getSessionsPlayers(e){const a=await h.get(`api/sessions/${e}/players`);u.log("[getSessionsPlayers]",a.data),l.players=a.data}async addPlayer(e){const a=await h.post("api/players",e);u.log("[addPlayers]",a.data),l.players=[...l.players,a.data]}async editPlayer(e){u.error("Not set up")}async deletePlayer(e){u.error("Not set up")}}const B=new Pa,Ta={setup(){const s=w({}),e=U();return{editable:s,async handleSubmit(){try{s.value.sessionId=e.params.id,await B.addPlayer(s.value),S.getOrCreateInstance(document.getElementById("player-add")).hide(),s.value={}}catch(a){u.error(a),b.toast(a.message,"error")}}}}},Ca={class:"container-fluid"},Oa={class:"mb-3 col-12"},Ha=o("label",{for:"name",class:"form-label"},"Name",-1),Ga=o("div",{class:""},[o("button",{class:"btn btn-success"},"Confirm")],-1);function Ua(s,e,a,t,r,c){return i(),d("div",Ca,[o("form",{onSubmit:e[1]||(e[1]=G((...n)=>t.handleSubmit&&t.handleSubmit(...n),["prevent"])),class:"row"},[o("div",Oa,[Ha,m(o("input",{type:"text",class:"form-control",name:"name",id:"name","aria-describedby":"helpId",placeholder:"Name...","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.name=n),required:""},null,512),[[_,t.editable.name]])]),Ga],32)])}var Va=f(Ta,[["render",Ua]]),Na=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Va});const Ba={setup(){const s=w({});return T(()=>{s.value=l.activePlayer}),{editable:s,async handleSubmit(){try{await B.editPlayer(s.value),S.getOrCreateInstance(document.getElementById("player-edit")).hide(),s.value={}}catch(e){u.error(e),b.toast(e.message,"error")}},async deletePlayer(){try{await b.confirm()&&(await B.deletePlayer(l.activePlayer.id),S.getOrCreateInstance(document.getElementById("player-edit")).hide(),b.toast("Player deleted","success"))}catch(e){u.error(e),b.toast(e.message,"error")}}}}},Ra={class:"container-fluid"},ja={class:"row"},Da={class:"mb-3 col-12"},La=o("label",{for:"name",class:"form-label"},"Name",-1),Ma={class:"d-flex justify-content-between"},qa={class:""},Fa={class:""};function za(s,e,a,t,r,c){return i(),d("div",Ra,[o("div",ja,[o("div",Da,[La,m(o("input",{type:"text",class:"form-control",name:"name",id:"name","aria-describedby":"helpId",placeholder:"Name...","onUpdate:modelValue":e[0]||(e[0]=n=>t.editable.name=n),required:""},null,512),[[_,t.editable.name]])]),o("div",Ma,[o("div",qa,[o("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...n)=>t.handleSubmit&&t.handleSubmit(...n))},"Confirm")]),o("div",Fa,[o("button",{class:"btn btn-danger",onClick:e[2]||(e[2]=(...n)=>t.deletePlayer&&t.deletePlayer(...n))}," Delete Player ")])])])])}var Wa=f(Ba,[["render",za]]),Ka=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Wa});const Ya={props:{session:{type:Object,required:!0}},setup(s){return{date:g(()=>new Date(s.session.createdAt).toLocaleString())}}},Qa={class:"m-0"};function Za(s,e,a,t,r,c){return i(),d("h3",Qa,p(t.date)+" || "+p(a.session.winner),1)}var Ja=f(Ya,[["render",Za]]),Xa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ja});function es(s){Object.entries({"./components/AccountEditForm.vue":Pe,"./components/GameAddForm.vue":et,"./components/GameEditForm.vue":xt,"./components/Hand.vue":Kt,"./components/HandAddForm.vue":co,"./components/HandEditForm.vue":xo,"./components/Login.vue":Ko,"./components/Modal.vue":na,"./components/Navbar.vue":ha,"./components/Player.vue":Ia,"./components/PlayerAddForm.vue":Na,"./components/PlayerEditForm.vue":Ka,"./components/Session.vue":Xa}).forEach(([a,t])=>{const r=t.name||a.substr(a.lastIndexOf("/")+1).replace(/\.\w+$/,"");s.component(r,t.default)})}ie(`${{}.BASE_URL}service-worker.js`,{ready(){console.log(`App is being served from cache by a service worker.
For more details, visit https://goo.gl/AFskqB`)},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(s){console.error("Error during service worker registration:",s)}});const J=de(be);es(J);J.use(K).mount("#app");export{l as A,b as P,f as _,h as a,V as g,N as h,u as l,B as p};
